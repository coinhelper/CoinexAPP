{
    "type": "Ext.data.Store",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "autoLoad": false,
        "designer|userClassName": "trade_pairs",
        "marketsLoaded": false,
        "model": "trade_pairs",
        "storeId": "trade_pairs"
    },
    "configAlternates": {
        "marketsLoaded": "boolean"
    },
    "designerId": "958a5477-8ebd-47f1-9aa9-c1e367810a10",
    "customConfigs": [
        {
            "group": "(Custom Properties)",
            "name": "marketsLoaded",
            "type": "string"
        }
    ],
    "cn": [
        {
            "type": "basiceventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onStoreLoad",
                "implHandler": [
                    "var market_ids = store.collect('market_id'),",
                    "    currencies = Ext.getStore('currencies'),",
                    "    markets = Ext.getStore('markets'),",
                    "    me = this;",
                    "",
                    "if(store.isFiltered()) {",
                    "    //somehow store current filter ?",
                    "    store.clearFilter(true);",
                    "}",
                    "",
                    "store.data.each(function (record) {",
                    "    var coin = Ext.getStore('currencies').findRecord('id', record.get('currency_id'));",
                    "    record.set('currency_name', coin.get('name'));",
                    "    record.commit();",
                    "});",
                    "",
                    "store.sort({",
                    "    property: 'currency_name',",
                    "    direction : 'ASC'",
                    "});",
                    "",
                    "//restore filter here?",
                    "",
                    "",
                    "if (successful && !me.marketsLoaded) {",
                    "",
                    "    if (markets.count() !== 0) {",
                    "        markets.removeAll();",
                    "    }",
                    "",
                    "    Ext.each(market_ids, function (market_id) {",
                    "        var currency = Ext.getStore('currencies').findRecord('id', market_id);",
                    "        markets.add({",
                    "            id:  market_id,",
                    "            name: currency.get('name')",
                    "        });",
                    "    });",
                    "    ",
                    "    store.filter('market_id', market_ids[0]);",
                    "",
                    "    me.marketsLoaded = true;",
                    "}"
                ],
                "name": "load",
                "scope": "me"
            },
            "designerId": "5240cb5d-2669-4288-8d0e-61fbbde2d72b"
        }
    ]
}